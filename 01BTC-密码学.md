# 比特币中的密码学

## 两个功能
+ 哈希函数
+ 数字签名
## 三个性质
+ collision resistance(哈希碰撞)
哈希碰撞是指对于两个不同的输入产生了相同的输出。由于输入空间十分巨大，因此这是不可避免的。但是resistance是指该函数很难找到两个这样相同的输入。

+ hiding
hiding是指哈希计算是单向的,不可逆。在比特币中一般在消息后面接一个随机数一起组成哈希的输入。

+ puzzle friendly
指哈希值事先不可预测。因此要找到哈希碰撞值，只能通过穷举法,因此比特币挖矿没有捷径只能一个一个试。

而比特币挖矿的过程，实际上就是找到一个nonce(随机数)，nonce与区块的块头里的其他信息合在一起作为输入，当得出的哈希值小于某个指定的阈值时，即H(block_header|nonce)<=target,就会获得工作量证明的奖励。

+ 比特币中一般采用SHA-256哈希函数，以上三个性质都满足
+ 在比特币系统中开账户：即生成一个公私钥匙对。

# 哈希函数

##　定义
Hash函数是一个从消息空间到像空间的不可逆变换.
## 特征
Hash函数必须满足以下特征
+ 函数可应用于任意长度的消息
+ 函数可以产生定长的输出
+ 对于任意给定的消息，计算H(x)容易实现
+ 单向性，指得到了加密后的消息无法推出原消息
## Hash函数应用
+ 数字签名
+ 消息认证
## 消息认证
消息发送者将原消息输入哈希函数得到一个输出值，将该输出值与原消息一起发送给接收方。接收方将接收的消息输入哈希函数，如果得到相同的输出值，则说明消息没有被篡改。
## 数字签名
### 带仲裁的数字签名
仲裁数字签名在签名者、签名接受者和仲裁者之间进行的，仲裁者为签名者和签名接受者共同信任，承担签名的验证任务。
1. 签名者首先对消息进行数字签名，发送给仲裁者
2. 仲裁者对消息进行验证与附加，并发送给接受者
3. 因为有仲裁者的验证，发送者无法抵赖自己发送过的消息。

### 不带仲裁的数字签名
在签名者与签名接受者之间进行，使用公钥密码体系。发送者有一个公钥和一个私钥，发送者利用私钥生成签名，与消息一并发送给接受者。接受者利用验证算法对私钥与签名进行认证。
# 数字签名
