# 比特币网络

比特币中的交易、区块如何在各个节点之间传输？这涉及到比特币网络协议的设计。  
比特币网络在应用层使用**比特币区块链协议**,在网络层中使用 **P2P overlay network(overlay-覆盖)**.
有些P2P网络存在超级节点(super node)或者主节点(master node),但比特币网络中只存在种子节点(seed node).  
每当有client预加入该网络时，client向种子节点询问其他节点的地址;client退出后也不需要告知其他节点，其他节点在一段时间没收到client的消息后便会自动将其删除。
为了便于穿透防火墙，节点与节点之间的通信使用TCP协议。

# 设计原则

比特币网络的设计原则是简单、鲁棒但不高效。网络中的节点每次接收到新的消息，都会直接转发给邻居节点(这个邻居节点不考虑距离),当再次收到该消息时不再进行转发。

比特币系统中每个节点都要维护一个**等待上链的交易集合**,每个节点第一次收到某个新交易时将其加入该集合中，并将该交易转发给邻居节点。下一次再收到该交易时就不再进行转发。

一旦某个交易被写入链中，集合中的该交易就会被删除，或者集合中的与该交易产生冲突的某个非法交易就会被删除。